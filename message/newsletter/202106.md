# BMPI每月通讯 - 2021.06

如果你问我最重要的两个技能是什么？我的答案是英文应用 + 科学上网能力。英文的自由应用能让你获取到中文世界无法获取到的一些信息，或者也可以让你看到事情的另一面。而这一点对一个人的独立思考相当重要，因为如果你掌握的信息是片面而错误的，你的思考也会受到很大的影响。科学上网能力本质和英文一样，能让你在互联网上更自由地不受束缚的去获取更全面的信息（一些科学文献也需要科学上网才能获取到），而这一点在国内相当重要。在第一份邮件中我分享了[我的英文学习经验](https://tinyletter.com/i365/letters/bmpi-2021-05)，而在这第二封邮件中我会分享我的科学上网经验。

## 科学上网历史

早在 2010 年前网络是开放的，直到墙的筑立。在这里我不想探讨墙的意识形态的问题，但是墙是怎么出现的，墙的用意是什么，我们可以从这个[视频](https://www.youtube.com/watch?v=XKZM_AjCUr0)中了解。

### 墙的介绍

中国工程院院士、北京邮电大学前校长方滨兴是防火长城关键部分的首要设计师，被称为中国国家防火墙之父。方滨兴说此系统起步于1998年，然而第一次使用 Great Firewall 这个名字的是Geremie Barmé和Sang Ye所写的文章《The Great Firewall of China》，文章发表于1997年6月1日，称当时金桥信息网和中国公用计算机互联网已经有在屏蔽国外新闻网站，这一审查系统开发开始在 1996 年。有人认为第一次使用 Great Firewall 的是 Charles R. Smith 在 2002年5月17日发布的文章《The Great Firewall of China》。

### 墙的技术手段

- 域名解析服务缓存污染
- IP地址或传输层端口封锁
- TCP连接重置
- 中间人攻击
- 探测 VPN 流量（PPTP、L2TP / IPSec）
- 对加密流量的探测（基于卷积神经网络对 Shadowsocks 流量进行探测）
- 对Tor的刺探（会对各种基于TLS加密技术的连接进行刺探）
- 间歇性封锁国际出口（当用户使用了科学上网软件后，其所在的公共网络IP地址会被临时封锁，所有的国际网站都无法访问）
- 深度包检测（于应用层对网络上传递的资料进行侦测与处理的技术，被广泛用于入侵检测、流量分析及数据挖掘）
- 针对IPv6协议的审查
- 对电子邮件通讯的拦截

### 科学上网的技术手段

- PPTP（已能被墙精准识别）
- L2TP/IPSec（已能被墙精准识别）
- Host文件（早期防止DNS污染的技术手段，目前已失效）
- SS/SSR（酸酸乳）
- V2RAY（也许是最新的科学上网技术）

### 科学上网的原理

在本地网络存在一个代理软件，代理了这个网络的网络请求，这个代理所做的工作就是通过一些加密混淆算法，把请求国外网络的流量伪装成普通的流量，用来让墙无法识别其目标网站，达到了科学上网的目的。代理软件一般也会代理 DNS 请求，这样可以防止运营商的 DNS 污染。

我们可以自己租用国外的云服务器搭建代理软件，也可以直接租用国外的科学上网服务，这些服务商（机场）会帮你解决网络问题，花点钱却可以节省很多时间。一些国外的视频网站如 HBO、Netflix 等也需要特定区域的 IP 地址才可以观看，机场也会帮你解决这类 IP 限制问题。某些机场也会租用国际专线 IPLC 和 IEPL 这类企业级别的专线来提高科学上网的质量。

### 法律安全

科学上网是否存在法律方面的问题？可以看看这个[视频](https://www.youtube.com/watch?v=mIif-7U2tEU)的介绍。

## 家庭网络科学上网

单独在某个电脑上科学上网有很多教程，最简单的就是去找个机场订阅他们的服务，然后使用 [Clash](https://github.com/Dreamacro/clash) 这类代理软件（不同系统有不同的客户端，比如 Mac 上就是 [clashx](https://github.com/yichengchen/clashX)）通过机场的服务科学上网。

自己搭建科学上网服务器也不是不行，但是我觉得很浪费时间（已经过了想折腾的年纪），虽然使用机场有一定的风险（机场跑路、隐私泄露），但是大部分情况下都可以接受。

如果你想让家里的所有或者部分设备也具备自动科学上网的能力，那就需要通过一个专用的设备去做代理服务这类方案。

最早期我在咸鱼买了一个 WNDR4300 路由器，然后刷了 [OpenWRT](https://openwrt.org/) 系统，并在路由器上安装了 [OpenClash](https://github.com/vernesong/OpenClash) 软件，但是此路由器的 CPU 性能太差（科学上网需要做大量的加密运算，对 CPU 算力要求高），导致设备过热容易死机，整体上网体验不好。

之后我尝试了软路由的方案，于是在咸鱼上淘了 3205u 软路由设备，但是这个设备在观看 Youtube/Netflix 4K 视频或者下载大量文件时也会过热死机（也可能是我买了一个不好的设备）。最终我放弃了这种方案，因为无论硬路由（路由器硬件）或者软路由的方案都灵活性不高，一旦这个核心设备出问题，全家都上不了网。

现在我一直在用的方案是旁路由方案，这种方案的好处在于需要科学上网的设备可以把本地的网络设置指向旁路由设备代理上网，而不需要翻墙的设备无需额外设置，一旦旁路由设备出问题也不会影响其他的设备上网。因为我有一台老 Macbook 设备，我就用这个设备作为旁路由，在上面安装了 [Surge](https://nssurge.com/) 网络代理软件，而在电视盒子、电脑和手机上将网络的路由器设置指向旁路由（静态 IP）的地址。之所以买 Surge 这个软件，是因为其设置无脑简单，功能强大，虽然贵了点，但是不需要折腾。目前我的家庭网络拓扑图是这样的：

![](https://img.bmpi.dev/b7da8cd9-d561-715d-b0e1-4a931e0a92c2.png)

这套方案非常简单无需折腾，想到早期折腾硬路由和软路由的血泪史，目前这套方案不能更幸福了。看个 4K 视频也毫无压力，虽然旁路由是通过无线连接的，但是 Macbook 的无线性能和 CPU 性能都足够强大，秒杀硬路由和软路由的计算性能。

具体的旁路由配置可以见这篇[家庭网络部署心得](https://blog.indigo.codes/2020/04/24/home-network-deployment/)。

我用的机场 [blinkload](https://blinkload.to/aff/LYWO) 目前快两年了，一直很稳定（哪怕在特殊时期依旧能用），虽然机场跑路是常态，但是目前用起来体验还好。

## 进阶阅读

- [科学上网](https://github.com/haoel/haoel.github.io)
- [Surge 官方中文指引：理解 Surge 原理](https://manual.nssurge.com/book/understanding-surge/cn/)
- [Project V · Project V 官方网站](https://www.v2ray.com/index.html)
- [硬核翻墙系列](https://youtu.be/XKZM_AjCUr0)

## 交流讨论

这就是本期的内容了，如果你有好的想法想要和我讨论，请给我发邮件（邮箱就在我的博客关于我页面）。
